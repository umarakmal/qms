"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[712],{75712:function(e,t,n){n.r(t);var c=n(93433),r=n(37762),a=n(74165),s=n(15861),o=n(29439),l=n(72791),i=n(22654),u=n(54379),d=n(41470),p=n(88890),f=n.n(p),h=n(57689),m=n(75985),v=n(83985),x=n.n(v),y=(n(67367),n(30910)),j=n(89529),k=n(754),Z=n(31803),g=n(80184),b="".concat("http://192.168.220.59:5000"),N=function(e){var t=e.children,n=e.maxHeight,c=e.getValue,r=(0,l.useState)([]),i=(0,o.Z)(r,2),u=i[0],d=i[1],p=c(),f=(0,o.Z)(p,1)[0],h=35*(u?u.map((function(e){return{label:e.EmployeeName+"-"+e.EmployeeID,value:e.EmployeeID+"-"+e.EmployeeName}})):null).indexOf(f),m=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/api/get-active-empid"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,422!==t.status&&n?n.length>0&&d(n):console.log("error ");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){m()}),[]),(0,g.jsx)(j.t7,{height:n,itemCount:t.length,itemSize:35,initialScrollOffset:h,children:function(e){var n=e.index,c=e.style;return(0,g.jsx)("div",{style:c,children:t[n]})}})};t.default=function(){var e=(0,h.TH)(),t=(0,l.useState)([]),n=(0,o.Z)(t,2),p=n[0],v=n[1],j=(0,l.useState)([]),S=(0,o.Z)(j,2),E=S[0],w=S[1],T=(0,l.useState)(null),C=(0,o.Z)(T,2),P=C[0],O=C[1],V=(0,l.useState)({}),I=(0,o.Z)(V,2),D=I[0],z=I[1],R=(0,l.useState)(""),A=(0,o.Z)(R,2),_=A[0],M=A[1],H=(0,l.useState)(""),L=(0,o.Z)(H,2),q=L[0],F=L[1],G=(0,l.useState)([]),J=(0,o.Z)(G,2),Y=J[0],B=J[1],$=D.selected;[].push($);var K=function(e){z({selected:e})},Q=p?p.map((function(e){return{label:e.EmployeeName+"-"+e.EmployeeID,value:e.EmployeeID+"-"+e.EmployeeName}})):null,U=E?E.map((function(e){return{label:e.Process,value:e.Process+"|"+e.cm_id}})):"",W=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,s,o,l,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/api/get-report-master-id"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({empid:t})});case 2:return n=e.sent,e.next=5,n.json();case 5:s=e.sent,K(s[0]),o=(0,r.Z)(s[1]),e.prev=8,i=(0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.value,void 0===Y.checkVal?B((function(e){return[].concat((0,c.Z)(e),[t])})):(u=Y.checkVal,B((function(e){return[].concat((0,c.Z)(u),[t])}))),f()("#"+t).prop("checked",!0);case 3:case"end":return e.stop()}}),e)})),o.s();case 11:if((l=o.n()).done){e.next=15;break}return e.delegateYield(i(),"t0",13);case 13:e.next=11;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(8),o.e(e.t1);case 20:return e.prev=20,o.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[8,17,20,23]])})));return function(t){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){!function(){var e=document.querySelectorAll(".needs-validation");Array.from(e).forEach((function(e){e.addEventListener("submit",(function(t){e.checkValidity()||(t.preventDefault(),t.stopPropagation()),e.classList.add("was-validated")}),!1)}))}()}),[]);var X=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/api/get-active-empid"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,422!==t.status&&n?n.length>0&&v(n):console.log("error ");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/api/get-active-client"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,422!==t.status&&n?n.length>0&&w(n):console.log("error ");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,l.useEffect)((function(){X(),ee(),"1"===_&&m.Am.success("New Report Mapped Successfully!"),"1"===q&&m.Am.error("Report Mapping failed!")}),[_,q]);var te=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t){var n,r,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,r=n.value,n.checked?void 0===Y.checkVal?B((function(e){return[].concat((0,c.Z)(e),[r])})):(s=Y.checkVal,B((function(e){return[].concat((0,c.Z)(s),[r])}))):void 0===Y.checkVal?B({checkVal:Y.filter((function(e){return e!==r}))}):(s=Y.checkVal,B({checkVal:s.filter((function(e){return e!==r}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null!=D.selected?f()("#dynCollection2").attr("disabled",!1):f()("#dynCollection2").attr("disabled",!0),(0,l.useEffect)((function(){if(null!=e.state){var t=e.state.split("-").reduce((function(e,t,n,c){return e.Label=c[0]+"-"+c[1],e.value=c[1]+"-"+c[0],e}),{});setTimeout((function(){window.history.replaceState({},document.title)}),1),O(t);var n=t.value;n=n.split("-"),W(n[0])}setTimeout((function(){window.history.replaceState({},document.title)}),100)}),[e]),(0,g.jsxs)("div",{children:[(0,g.jsx)(i.Z,{}),(0,g.jsx)(d.Z,{}),(0,g.jsx)(m.Ix,{}),(0,g.jsx)("div",{className:"content-wrapper",children:(0,g.jsx)("section",{className:"content ",children:(0,g.jsx)("div",{className:"container-fluid ",children:(0,g.jsx)("form",{noValidate:!0,className:"needs-validation",onSubmit:function(e){e.preventDefault();var t=P.value.split("-"),n=Y.checkVal,c=t[0];if(void 0===Y.checkVal&&(n=Y),!c)return!1;if(Object.values(n).length<=0)return alert("please check report type"),!1;if(Object.values($||{}).length<=0)return alert("please select process"),!1;var r=P.value.split("-"),o=r[0],l=r[1],i=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/api/d-master-report-get"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:o})});case 2:return t=e.sent,e.next=5,t.json();case 5:c=e.sent,422!==t.status&&c?c&&200===t.status&&n.map((function(e){var t=e;$.map((function(e){var n=e.split("|"),c=n[0],r=n[1],i=(n[2],c.concat("|",r),n[3]),u=e,d=(0,y.$D)().EmployeeID,p=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var n,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b,"/api/report-master"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({process:u,employeeId:o,cm_id:i,createdBy:d,report_name:t,employeeName:l})});case 2:return n=e.sent,e.next=5,n.json();case 5:c=e.sent,422!==n.status&&c?c&&200===n.status?(M("1"),O(""),z({}),f()("#selectsheet").val(""),B({checkValue:"",response:""}),f()("#cs").prop("checked",!1),f()("#dr").prop("checked",!1),f()("#mr").prop("checked",!1),setTimeout((function(){M("")}),200)):F("1"):console.log("error ");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();p()}))})):console.log("error ");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();i()},children:(0,g.jsx)("div",{className:"row mt-2",children:(0,g.jsx)("div",{style:{fontSize:"12.3px"},className:"col-md-12",children:(0,g.jsxs)("div",{className:"card card-info mt-3",children:[(0,g.jsx)("div",{className:"card-header",children:(0,g.jsx)("h3",{className:"card-title",children:"Report Master Allocation"})}),(0,g.jsxs)("div",{className:"card-body",children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsxs)("div",{className:"form-group col-sm-6",children:[(0,g.jsx)("label",{style:{fontSize:"11px"},htmlFor:"xyz",children:"Employee ID :"}),(0,g.jsx)(k.ZP,{name:"employeeid",onChange:function(e){if(B([]),f()("#cs").prop("checked",!1),f()("#dr").prop("checked",!1),f()("#mr").prop("checked",!1),O(e),null!==e){var t=e.value;t=t.split("-"),W(t[0])}},value:P?Q.find((function(e){return e.value===P.value})):null,style:{fontSize:"12.4px"},id:"selectsheet",options:Q,filterOption:(0,Z.c)({ignoreAccents:!1}),components:{MenuList:N},required:!0}),(0,g.jsx)("div",{className:"invalid-feedback",children:"Please choose an EmployeeID."})]}),(0,g.jsxs)("div",{className:"form-group  col ",children:[(0,g.jsx)("label",{style:{fontSize:"11px"},className:"ml-2",htmlFor:"xyz",children:"REPORT TYPE/SHEET :"}),(0,g.jsxs)("div",{className:"form-check ml-2",children:[(0,g.jsx)("input",{className:"form-check-input",value:"cs",onChange:te,name:"report_name",type:"checkbox",id:"cs"}),(0,g.jsx)("label",{className:"form-check-label",children:"CREATE SHEET"})]}),(0,g.jsxs)("div",{className:"form-check ml-2",children:[(0,g.jsx)("input",{className:"form-check-input",value:"dr",onChange:te,name:"report_name",type:"checkbox",id:"dr"}),(0,g.jsx)("label",{className:"form-check-label",children:"DISCRIPTED REPORT"})]}),(0,g.jsxs)("div",{className:"form-check ml-2",children:[(0,g.jsx)("input",{className:"form-check-input",value:"mr",onChange:te,name:"report_name",type:"checkbox",id:"mr"}),(0,g.jsx)("label",{className:"form-check-label",children:"MIS REPORT"})]})]})]}),(0,g.jsx)("hr",{}),(0,g.jsxs)("div",{className:"col-md-12 mt-2",children:[(0,g.jsxs)("div",{className:"row",children:[(0,g.jsx)("legend",{className:"col-md-6  font-weight-bold",style:{fontSize:"11px"},children:"All Process"}),(0,g.jsx)("legend",{className:"col-md-6 font-weight-bold",style:{fontSize:"11px"},children:"Selected Process"})]}),(0,g.jsx)(x(),{options:U,selected:$,onChange:K,name:"duallistt",id:"dls",canFilter:!0,alignActions:"top",style:{fontSize:"12.4px"},required:!0}),(0,g.jsx)("div",{className:"invalid-feedback",children:"Please choose an option."})]}),(0,g.jsx)("div",{children:(0,g.jsx)("center",{children:(0,g.jsx)("button",{type:"submit",style:{fontSize:"12px",marginTop:"1.6rem"},className:"btn btn-info btn-sm",children:"Save"})})})]})]})})})})})})}),(0,g.jsx)(u.Z,{})]})}}}]);
//# sourceMappingURL=712.edbca30c.chunk.js.map